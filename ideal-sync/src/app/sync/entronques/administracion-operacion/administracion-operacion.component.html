<div class="ui-g">
	<div class="ui-g-4">
		<label>Autopista/Grupo</label>
		<p-dropdown [filter]="true" [options]="autopistasSel" [(ngModel)]="autopistaSel" [style]="{'width':'100%'}" (onChange)="seleccionaAutopista()">
			<template let-aut>
				<div style="height: 25px;">
					{{aut.label}}
				</div>
			</template>
		</p-dropdown>
	</div>
	<div class="ui-g-8">
	</div>
</div>
<!--<div *ngIf="entronques && (+autopistaSel>0)" class="ui-g">

</div>
<br/>-->
<div class="ui-g" *ngIf="entronques && (+autopistaSel>0)">
	<div class="ui-g-12 ">
		<div class="ui-widget-header ui-helper-clearfix" style="padding:4px 10px;border-bottom: 0 none">
			<div class="ui-g">
				<div class="ui-g-12">
					<p-toolbar>
						<div class="ui-toolbar-group-left">
							<button title="Nuevo" enableInRole="Administrador" pButton type="button" label="Nuevo" icon="fa-plus" (click)="nuevo()"></button>
							<!--<button md-raised-button color="primary" (click)="nuevo()"><md-icon fontSet="fa" fontIcon="fa-plus"></md-icon>Nuevo</button>-->
							<button title="Editar" enableInRole="Administrador" [enableInRoleAnd]="!entronqueSeleccionado" pButton type="button" label="Editar"
								icon="fa-pencil" (click)="editar()"></button>
							<button title="Cargar Datos" [disabled]="!entronqueSeleccionado" pButton type="button" label="Cargar Datos" icon="fa-arrow-up"
								(click)="cargarDatos()"></button>
							<button title="Ejecución manual" [disabled]="!entronqueSeleccionado || !entronqueSeleccionado.Estatus" pButton type="button" label="Ejecución manual" icon="fa-gear"
								(click)="ejecutarSincronizacion()"></button>
							<button title="Eliminar" enableInRole="Administrador" [enableInRoleAnd]="!entronqueSeleccionado" pButton type="button" label="Eliminar"
								icon="fa-trash" (click)="eliminar()"></button>
							<button title="Activar/Desactivar" enableInRole="Administrador" [enableInRoleAnd]="!entronqueSeleccionado" pButton type="button"
								label="Activar/Desactivar" icon="fa-toggle-on" (click)="toogleActivo()"></button>
						</div>
						<div class="ui-toolbar-group-right">
							<button title="Actualizar datos" pButton type="button" icon="fa-refresh" (click)="actualizaEntronques()"></button>
							<!--<i class="fa fa-bars"></i>
        <button title="Descargar datos" type="button" pButton icon="fa-file-excel-o" iconPos="left" (click)="dt.exportCSV()"></button>-->
						</div>
					</p-toolbar>
				</div>
				<div class="ui-g-12">
					<i class="fa fa-search" style="float:left;margin:4px 4px 0 0;"></i>
					<input #bq type="text" pInputText style="float:left; width: 45%" placeholder="Busqueda">
				</div>
			</div>
		</div>
		<!--<div class="ui-g-12">-->
		<p-dataTable emptyMessage="Sin registros" #dt [value]="entronques" selectionMode="single" [(selection)]="entronqueSeleccionado"
			[rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,15,20]" [globalFilter]="bq">
			<header>Entronques</header>
			<footer *ngIf="entronques">Total: {{entronques.length}}</footer>
			<p-column field="IdEntronque" header="Identificador" [style]="{'width': '45%'}"></p-column>
			<p-column field="Descripcion" header="Nombre" [style]="{'width': '45%'}"></p-column>
			<p-column field="Estatus" header="Activo" [style]="{'width': '10%', 'text-align': 'center'}">
				<template pTemplate let-ent="rowData">
					<span><i [class]="ent.Estatus?'fa fa-check':'fa fa-times'"></i></span>
				</template>
			</p-column>
		</p-dataTable>
	</div>
</div>
<p-dialog style="position: fixed; top: 30%; left:40%; z-index: 19861108; height: 150px;" header="Proceso OnDemand" [visible]="confirmarEjecucion"
	responsive="true" [closable]="false">
	<form [formGroup]="procesoForm">
		<div class="ui-g">
			<div class="ui-g-12">
				<p-calendar [inputStyle]="{'width':'100%'}" [style]="{'width':'100%'}" placeholder="Fecha" formControlName="fecha" [locale]="es"
					[maxDate]="fHoy" dateFormat="dd/mm/yy" [readonlyInput]="true"></p-calendar>
			</div>
		</div>
		<div class="ui-g" style="text-align: center; overflow: hidden">
			<div class="ui-g-6">
				<button [disabled]="!procesoForm.valid" md-raised-button type="button" (click)="confirmaEjecucion()">Aceptar</button>
			</div>
			<div class="ui-g-6">
				<button md-raised-button type="button" (click)="cancelaEjecucion()">Cancelar</button>
			</div>
		</div>
	</form>
</p-dialog>